data merge entity @s {CustomName:[{"text":"Frosty Sword Guardian","color":"aqua"}],Health:70,PersistenceRequired:1b,Tags:["companion"],DeathLootTable:"empty",Team:DIREWOOD,active_effects:[{id:invisibility,duration:-1,amplifier:0,ambient:1b,show_particles:1b}],HandItems:[{id:iron_sword,components:{"minecraft:custom_model_data":2,enchantments:{levels:{knockback:1,"gd_enchantment:frostbite":1,sweeping_edge:3,unbreaking:10}},attribute_modifiers:[{id:"5dfdb30c-9880-4f25-a8db-30ab29a53789",type:"attack_damage",amount:12,operation:"add_value",slot:"mainhand"},{id:"d3180c15-c3f4-4056-b5f2-082357586622",type:"attack_speed",amount:-3.3,operation:"add_value",slot:"mainhand"},{id:"e198f74f-adc5-4ec2-92ff-9864176994ad",type:"player.sweeping_damage_ratio",amount:0.5,operation:"add_value",slot:"mainhand"}]},count:1},{id:shield,components:{enchantments:{levels:{unbreaking:10}},banner_patterns:[{pattern:rhombus,color:white},{pattern:flower,color:brown},{pattern:stripe_middle,color:black},{pattern:globe,color:light_blue},{pattern:piglin,color:cyan},{pattern:circle,color:black},{pattern:triangle_top,color:black},{pattern:curly_border,color:black}],base_color:black},count:1}],HandDropChances:[0f,0f],ArmorItems:[{id:iron_boots,components:{enchantments:{levels:{frost_walker:1,unbreaking:10}}},count:1},{id:iron_leggings,components:{enchantments:{levels:{unbreaking:10}}},count:1},{id:iron_chestplate,components:{enchantments:{levels:{unbreaking:10}}},count:1},{id:iron_helmet,components:{enchantments:{levels:{unbreaking:10}}},count:1}],ArmorDropChances:[0f,0f,0f,0f],attributes:[{id:"max_health",base:70f},{id:"minecraft:scale",base:1.1}]}
scoreboard players operation @s entity.companion.duration = @e[type=minecraft:area_effect_cloud,limit=1,sort=nearest] entity.companion.duration
scoreboard players operation @s UUID = @e[type=minecraft:area_effect_cloud,limit=1,sort=nearest] UUID
scoreboard players operation @s user.companion.count.perk = @e[type=minecraft:area_effect_cloud,limit=1,sort=nearest] user.companion.count.perk
execute at @s as @e[tag=companion] if score @s UUID = @e[limit=1,sort=nearest] UUID run scoreboard players add @s INT 1
execute if score @s INT < @s user.companion.count.perk at @s as @a if score @s UUID = @e[limit=1,sort=nearest] UUID at @s as @e[tag=companion] if score @s INT > @s user.companion.count.perk run kill @s